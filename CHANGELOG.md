# CHANGELOG

所有重要的项目变更都将记录在此文件中。

## [v1.2.0] - 2026-01-02

### 新增

- 实现智能修复策略选择，根据网络环境自动选择最优修复方案
- 新增详细修复报告生成功能，支持文本和JSON格式
- 实现DNS解析缓存（5分钟），提高解析效率
- 新增DNS服务器可用性检测，动态选择可用服务器
- 新增TCP连接预筛选，IP测速时间减少30%
- 实现网络状态指示灯，实时显示连接状态
- 实现3分钟自动网络连通性测试，界面指示灯同步显示
- 详细记录修复原因、方法和验证结果

### 改进

- 优化IP质量评估算法，综合考虑成功率、延迟、连续成功次数、测试次数四个维度
- 增强修复后验证机制，3次验证尝试，支持快速成功
- 改进Hosts修复策略，支持多IP、单IP、最小化IP三种方案
- 优化修复报告记录，包含修复原因、方法、验证结果、策略和网络环境信息
- 更新README.md，添加新功能和改进的描述
- 更新了rule_next.txt文件，添加了新的分层规则
- 将trace层的复杂功能迁移到service层，确保trace层文件行数不超过250行
- 简化了trace层文件，只保留基础功能，提高了代码的可维护性
- 修复网络指示灯，使其能显示来自诊断功能等其他工具的检测结果
- 优化.gitignore配置，确保.trae文件夹和其他临时文件不被追踪

### 修复

- 修复了DNS查询超时处理，增加重试机制
- 修复了修复功能中的extended_ips未定义错误
- 优化了Hosts修复策略，只写入github.com和api.github.com
- 确保所有trace层文件的行数都在250行以内，符合新的分层规则
- 修复了repair_strategies未定义错误
- 修复了PowerShell命令执行错误
- 修复了module 'tool_module' has no attribute 'run'错误
- 修复了github_checker语法错误
- 修复了grep命令在PowerShell中无法使用的问题，改用Select-String
- 修复了网络指示灯不会获取诊断功能等其他功能进行检测的结果的问题

## [v1.1.2] - 2025-12-31

### 修复

- 将github-checker.py的行数从139行减少到70行，符合120行以内的要求
- 为所有service层文件添加了对trace层内容的引用，符合分层架构要求

### 改进

- 更新了.gitignore文件，添加了忽略txt文件的规则

## [v1.1.1] - 2025-12-30

### 修复

- 修复了守护进程中未使用的`global running`变量
- 修复了HOSTS修复工具中的变量名`l`为`line`，避免歧义
- 修复了多个文件中的裸except问题，改为使用`except Exception:`
- 修复了HOSTS查看器中的无效转义序列问题，使用原始字符串表示路径
- 修复了测速工具中未使用的`load_ip_quality_db`导入

### 改进

- 更新了flake8配置，忽略更多非关键警告
- 优化了代码风格检查配置
- 改进了进度条清理逻辑，避免残留字符
- 增强了结果面板的稳定性

### 新增

- 添加了API文档（API.md），详细说明了模块和函数的使用方法
- 添加了GitHub Actions配置，实现自动CI/CD流程
- 增加了多版本Python兼容性测试
- 增加了安全扫描环节

## [v1.1.0] - 2025-12-30

### 修复

- 修复了守护进程的github_checker导入路径
- 修复了进度条重叠和残留字符问题
- 修复了连接诊断和连通性检测工具结果冲突问题

### 改进

- 移除了`GitHub-main-主界面/`目录，配置统一到根目录
- 优化了IP质量数据库的使用
- 改进了一键检测修复工具的5层备用方案
- 优化了连通性检测的超时处理
- 改进了高延迟判断逻辑

### 新增

- 新增了`design.txt`、`design.txt.bak`、`style.md`、`project_rule.md`文件
- 各子模块添加独立配置文件
- 更新了项目结构和文档说明

## [v1.0.0] - 2025-12-29

### 新增

- 初始版本发布
- 图形界面整合
- 模块化重构
- 完整代码风格检查
- 核心功能实现：
  - 连通性检测
  - DNS查询
  - IP测速
  - Hosts修复
  - Hosts查看
  - 守护进程
  - 一键检测修复
  - 快速测速
  - Hosts管理器
  - 连接诊断
  - IP黑名单

## 版本规范

本项目遵循[语义化版本规范](https://semver.org/lang/zh-CN/)：

- **主版本号（MAJOR）**：当你做了不兼容的API修改
- **次版本号（MINOR）**：当你做了向后兼容的功能性新增
- **修订号（PATCH）**：当你做了向后兼容的问题修正

## 变更类型

- **新增**：新添加的功能
- **改进**：对现有功能的优化和改进
- **修复**：修复的bug和问题
- **废弃**：即将移除的功能
- **移除**：已移除的功能
- **安全**：安全相关的修复

## 发布说明

每个版本发布时，会包含以下信息：

- 版本号和发布日期
- 变更类型和详细描述
- 影响范围
- 兼容性说明
- 升级指南（如果有）
