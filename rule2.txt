# GitHub工具合集 - 分层规则（无歧义版）

## 1. 分层设计核心原则

### 1.1 分层架构
- **子项目层**：规则最严，行数最小
- **trace层**：规则减少，行数放宽
- **service层**：规则适度，功能集成
- **根目录层**：自由灵活，无限制
- **特殊文件夹**：不符合子项目命名规则的文件夹（如github_utils），暂时不做任何限制

### 1.2 调用规则
- 仅根目录文件可调用所有层文件
- service层可调用trace层和子项目层
- trace层可调用子项目层
- 子项目层禁止互相调用
- 特殊文件夹可自由调用其他层文件

### 1.3 内容定位
- **子项目层**：单一功能模块，原子性工具，如github-checker、github-search等
- **trace层**：追踪和监控功能，日志记录，数据收集，如trace_utils、monitor等
- **service层**：业务逻辑集成，多模块协作，如user_service、task_service等
- **根目录层**：启动脚本，全局配置，工具入口，如run.py、count_lines.py等
- **特殊文件夹**：辅助工具，通用库，如github_utils等

## 2. 子项目层规则

### 2.1 命名规则
- 位置：根目录下的文件夹
- 命名：github-<feature>-[feature2]

### 2.2 结构规则
- 1个主要代码文件
- 可选JSON配置文件
- 禁止创建其他文件

### 2.3 代码规则
- 单文件≤120行
- 编码声明必须用ASCII
- 遵循github-checker代码风格

### 2.4 依赖规则
- 仅依赖Python标准库
- 禁止依赖其他子项目
- 禁止依赖trace层

## 3. trace层规则

### 3.1 位置规则
- 位于根目录下的trace文件夹

### 3.2 代码规则
- 单文件≤250行
- 无编码强制要求
- 无风格强制要求

### 3.3 依赖规则
- 可依赖Python标准库
- 可依赖子项目层
- 禁止依赖其他trace层文件

## 4. service层规则

### 4.1 位置规则
- 位于根目录下的service文件夹

### 4.2 结构规则
- 单个代码文件
- 可选JSON配置文件

### 4.3 代码规则
- 单文件≤400行
- 无编码强制要求
- 无风格强制要求

### 4.4 依赖规则
- 可依赖Python标准库
- 必须引用至少一个trace层的内容
- 可依赖子项目层
- 禁止依赖其他service层文件

## 5. 根目录层规则

### 5.1 位置规则
- 根目录下直接存放的文件

### 5.2 无限制规则
- 无文件个数限制
- 无行数限制
- 无风格限制
- 无依赖限制

## 5. 特殊子项目保护

### 5.1 github-checker-检测状态
- 保持原样，禁止修改
- 可被根目录文件调用
- 作为代码风格标准
